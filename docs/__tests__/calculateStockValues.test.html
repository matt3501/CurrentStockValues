<!DOCTYPE html>

<html>
<head>
  <title>calculateStockValues.test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="..\docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="calculateStockValues.test.html">
                  __tests__/calculateStockValues.test.js
                </a>
              
                
                <a class="source" href="..\calculateStockValues.html">
                  calculateStockValues.js
                </a>
              
                
                <a class="source" href="..\language.en.resources.html">
                  language.en.resources.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>calculateStockValues.test.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-meta">"use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <pre><code>calculateStockValue.test.js <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/matt3501/CurrentStockValues</span>

Licensed under the Apache License, Version <span class="hljs-number">2.0</span> (the <span class="hljs-string">"License"</span>);
you may not use <span class="hljs-keyword">this</span> file except <span class="hljs-keyword">in</span> compliance <span class="hljs-keyword">with</span> the License.
You may obtain a copy <span class="hljs-keyword">of</span> the License at
<span class="hljs-attr">http</span>:<span class="hljs-comment">//www.apache.org/licenses/LICENSE-2.0</span>

Unless required by applicable law or agreed to <span class="hljs-keyword">in</span> writing, software
distributed under the License is distributed on an <span class="hljs-string">"AS IS"</span> BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License <span class="hljs-keyword">for</span> the specific language governing permissions and
limitations under the License.</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Tests of the helper method(s) at the top of the file.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">"Helper method Tests"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Try to sum the array elements based on the provided property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"Array.prototype.sum test - Happy path"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);

        <span class="hljs-keyword">let</span> toBeSummed = [
            { <span class="hljs-string">"key"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">27</span> },
            { <span class="hljs-string">"key"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">22</span> },
            { <span class="hljs-string">"key"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span> }
        ];</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> sum = toBeSummed.sum(<span class="hljs-string">"value"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(sum).toBe(<span class="hljs-number">50</span>);
    });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Tests of the <code>PortfolioDisplayItem</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">"PortfolioDisplayItem Tests"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Confirm the optional values of the constructor yield a valid response.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"displayObjects test - Happy path"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);

        <span class="hljs-keyword">let</span> shouldBeObjects = {
            <span class="hljs-string">"Ticker"</span>: <span class="hljs-string">"Total"</span>,
            <span class="hljs-string">"Quantity"</span>: <span class="hljs-number">10</span>,
            <span class="hljs-string">"Current Price"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">"High"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">"Low"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">"Current Value"</span>: <span class="hljs-literal">null</span>
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> stock = <span class="hljs-keyword">new</span> calculateStockValues.PortfolioDisplayItem(<span class="hljs-string">"Total"</span>, <span class="hljs-number">10</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(<span class="hljs-built_in">JSON</span>.stringify(stock.displayObjects)).toBe(<span class="hljs-built_in">JSON</span>.stringify(shouldBeObjects));
    });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Tests of the <code>Portfolio</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">"Portfolio Tests"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Make sure the <code>Portfolio</code> properly handles creating a total.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"constructor test - Happy path"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);

        <span class="hljs-keyword">let</span> stocksToRetrieve = [
            <span class="hljs-keyword">new</span> calculateStockValues.PortfolioDisplayItem(<span class="hljs-string">"test1"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">500.01</span>),
            <span class="hljs-keyword">new</span> calculateStockValues.PortfolioDisplayItem(<span class="hljs-string">"test2"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">499.99</span>),
            <span class="hljs-keyword">new</span> calculateStockValues.PortfolioDisplayItem(<span class="hljs-string">"test3"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>)
        ];</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">let</span> portfolio = <span class="hljs-keyword">new</span> calculateStockValues.Portfolio(stocksToRetrieve);
        <span class="hljs-keyword">let</span> displayItems = portfolio.displayItems;
        <span class="hljs-keyword">let</span> total = displayItems[displayItems.length - <span class="hljs-number">1</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(total.currentValue).toBe(<span class="hljs-number">1010</span>);
    });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Tests of the <code>StockController</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">"StockController Tests"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Based on the static historical data, make sure lows and highs are 
calculated correctly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"findMinAndMaxFromHistoricalData - Happy path"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);
        <span class="hljs-keyword">let</span> stock = <span class="hljs-keyword">new</span> calculateStockValues.PortfolioDisplayItem(<span class="hljs-string">"test"</span>, <span class="hljs-number">10</span>);

        stock.historicalData = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">"{\"symbol\":\"AAPL\",\"historical\":[{\"date\":\"2015-04-09\","</span> +
            <span class="hljs-string">"\"open\":125.85,\"high\":126.58,\"low\":124.66,\"close\":126.56,\""</span> +
            <span class="hljs-string">"adjClose\":117.09,\"volume\":32484000,\"unadjustedVolume\":3248400"</span> +
            <span class="hljs-string">"0,\"change\":-0.71,\"changePercent\":-0.564,\"vwap\":125.93333,\"l"</span> +
            <span class="hljs-string">"abel\":\"April 09, 15\",\"changeOverTime\":-0.00564},{\"date\":\"2"</span> +
            <span class="hljs-string">"015-04-10\",\"open\":125.95,\"high\":127.21,\"low\":125.26,\"close"</span> +
            <span class="hljs-string">"\":127.1,\"adjClose\":117.59,\"volume\":40188000,\"unadjustedVolum"</span> +
            <span class="hljs-string">"e\":40188000,\"change\":-1.15,\"changePercent\":-0.913,\"vwap\":12"</span> +
            <span class="hljs-string">"6.52333,\"label\":\"April 10, 15\",\"changeOverTime\":-0.00913},{"</span> +
            <span class="hljs-string">"\"date\":\"2015-04-13\",\"open\":128.37,\"high\":128.57,\"low\":12"</span> +
            <span class="hljs-string">"6.61,\"close\":126.85,\"adjClose\":117.36,\"volume\":36365100,\"un"</span> +
            <span class="hljs-string">"adjustedVolume\":36365100,\"change\":1.52,\"changePercent\":1.184,"</span> +
            <span class="hljs-string">"\"vwap\":127.34333,\"label\":\"April 13, 15\",\"changeOverTime\":0"</span> +
            <span class="hljs-string">".01184}]}"</span>);
        <span class="hljs-keyword">let</span> stocksToRetrieve = [stock];</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">let</span> controller = <span class="hljs-keyword">new</span> calculateStockValues.StockController(stocksToRetrieve);
        controller.findMinAndMaxFromHistoricalData(stock);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(stock.low).toBe(<span class="hljs-number">124.66</span>);
        expect(stock.high).toBe(<span class="hljs-number">128.57</span>);
    });
});</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Tests of the <code>CsvUtils</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">"CsvUtils Test"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Make sure that the CSV data is created properly with staged values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"JSON object[] test of CSVUtils.jsonArrayToCSV - Happy path"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);
        <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
        <span class="hljs-keyword">const</span> input = [
            { <span class="hljs-string">"Ticker"</span>: <span class="hljs-string">"AAPL"</span>, <span class="hljs-string">"Quantity"</span>: <span class="hljs-string">"5"</span>, <span class="hljs-string">"Current Price"</span>: <span class="hljs-string">"$315.11"</span>, <span class="hljs-string">"High"</span>: <span class="hljs-string">"$323.33"</span>, <span class="hljs-string">"Low"</span>: <span class="hljs-string">"$142.00"</span>, <span class="hljs-string">"Current Value"</span>: <span class="hljs-string">"$1,575.53"</span> },
            { <span class="hljs-string">"Ticker"</span>: <span class="hljs-string">"SPY"</span>, <span class="hljs-string">"Quantity"</span>: <span class="hljs-string">"10"</span>, <span class="hljs-string">"Current Price"</span>: <span class="hljs-string">"$326.61"</span>, <span class="hljs-string">"High"</span>: <span class="hljs-string">"$327.39"</span>, <span class="hljs-string">"Low"</span>: <span class="hljs-string">"$242.60"</span>, <span class="hljs-string">"Current Value"</span>: <span class="hljs-string">"$3,266.10"</span> },
            { <span class="hljs-string">"Ticker"</span>: <span class="hljs-string">"KMI"</span>, <span class="hljs-string">"Quantity"</span>: <span class="hljs-string">"15"</span>, <span class="hljs-string">"Current Price"</span>: <span class="hljs-string">"$21.49"</span>, <span class="hljs-string">"High"</span>: <span class="hljs-string">"$21.88"</span>, <span class="hljs-string">"Low"</span>: <span class="hljs-string">"$15.10"</span>, <span class="hljs-string">"Current Value"</span>: <span class="hljs-string">"$322.35"</span> },
            { <span class="hljs-string">"Ticker"</span>: <span class="hljs-string">"Total"</span>, <span class="hljs-string">"Quantity"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"Current Price"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"High"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"Low"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"Current Value"</span>: <span class="hljs-string">"$5,163.98"</span> }
        ];
        <span class="hljs-keyword">var</span> exampleOutput = fs.readFileSync(<span class="hljs-string">'ExampleOutput.csv'</span>, <span class="hljs-string">'utf8'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">let</span> jsonArrayToCsv = calculateStockValues.CsvUtils.jsonArrayToCsv(input);</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(jsonArrayToCsv).toBe(exampleOutput);
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Fail gracefully if provided no data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    it(<span class="hljs-string">"JSON object[] test of CSVUtils.jsonArrayToCSV - input validation"</span>, () =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><code>Arrange</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">const</span> calculateStockValues = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../calculateStockValues'</span>);
        <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
        <span class="hljs-keyword">const</span> input = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p><code>Act</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">let</span> jsonArrayToCsv = calculateStockValues.CsvUtils.jsonArrayToCsv(input);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><code>Assert</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        expect(jsonArrayToCsv).toBe(<span class="hljs-string">""</span>);
    });
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
